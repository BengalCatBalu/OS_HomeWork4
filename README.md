# Отчет по реализации клиент-серверного приложения с использованием протокола UDP

**Исполнитель:** Ефимов Иван
**Группа:** БПИ212
**Номер варианта:** 28

## Задача

Задача о Винни-Пухе – 3 или мстительные пчелы. Неправильные пчелы, подсчитав в конце месяца убытки от наличия в
лесу Винни-Пуха, решили разыскать его и наказать в назидание
всем другим любителям сладкого. Для поисков медведя они поделили лес на участки, каждый из которых прочесывает одна стая
неправильных пчел. В случае нахождения медведя на своем участке стая проводит показательное наказание и возвращается в улей.
Если участок прочесан, а Винни-Пух на нем не обнаружен, стая
также возвращается в улей. Там она получает информацию об еще
неисследованных участках и снова улетает. Требуется создать
приложение, моделирующее действия пчел. Каждая стая
— отдельный клиент. Сервер — улей. Время обследования участка
задается случайно.

## Описание решения

В решении используется клиент-серверная архитектура, где сервер является улеем, а клиенты - стаями пчел. Сервер и клиенты обмениваются сообщениями с использованием протокола UDP. Количество секторов установлено заранее и равняется 20. Сервер производит обход участков по порядку. Вероятность, что в секторе найдется Винни-Пух - 5%

### Сервер

Сервер создает сокет и привязывает его к заданному порту. Он генерирует список участков, которые нужно обследовать, и инициализирует массив explored_sectors, который отслеживает, какие участки уже были исследованы. Затем сервер начинает ожидать запросов от клиентов.

При получении запроса от клиента, сервер выбирает случайный участок из списка, который еще не был исследован, и отправляет его номер клиенту. Затем сервер ожидает ответа от клиента о нахождении Винни-Пуха на участке.

Если клиент находит Винни-Пуха, сервер выводит информацию о нахождении и наказании Винни-Пуха, а затем завершает работу. Если Винни-Пух не найден, сервер помечает участок как исследованный и продолжает обработку запросов.

### Клиент

Клиент также создает сокет и устанавливает соединение с сервером, указывая его IP-адрес и порт. Затем клиент отправляет серверу запрос на получение задания.

После получения задания от сервера, клиент выводит информацию о номере участка, который ему был назначен. Затем клиент исследует участок в течение случайного времени (3-5 секун

д), имитируя задержку. После этого клиент генерирует случайное число, чтобы определить, нашел ли он Винни-Пуха на участке.

Клиент отправляет результат поиска серверу и ожидает дальнейших инструкций. Если клиент находит Винни-Пуха, он отправляет серверу сообщение о нахождении и завершает работу. Если Винни-Пух не найден, клиент ожидает нового задания от сервера.

## Запуск программы

Программы запускаются в среде Linux с использованием командной строки. Для запуска сервера необходимо указать порт сервера в качестве аргумента командной строки:

```
./server <порт сервера>
```

Например:

```
./server 5000
```

Для запуска клиента необходимо указать IP-адрес сервера и порт сервера в качестве аргументов командной строки:

```
./client <IP-адрес сервера> <порт сервера>
```

Например:

```
./client 127.0.0.1 5000
```

## Результаты работы программы

При запуске сервера выводится сообщение о том, что сервер запущен и ожидает подключения клиентов. Каждый клиент выводит свой PID и сообщение о подключении к серверу.

В процессе работы сервера и клиентов, информация об исследованных участках и нахождении Винни-Пуха выводится на консоль сервера.

Если Винни-Пух найден на каком-либо участке, сервер и клиенты завершают работу и выводят сообщение об этом.

## Завершение работы

Завершение работы клиентов и сервера в данной реализации не оговаривается. По умолчанию, после нахождения Винни-Пуха на участке, сервер и клиенты завершают работу. Они могут быть завершены пользователем, например, нажатием сочетания клавиш Ctrl+C.
